
    public void DeleteProject(int ProjectId)
    {
        //Generated using APIServiceBuilder            
        if (!_userService.IsSubscriptionAdminCurrentProject())
                throw new AuthorizationException("A user must be subscription administrator on the same subscription as the project to delete it.");
        using (var _tx = _context.Database.CurrentTransaction ?? _context.Database.BeginTransaction())
        {
            try
            {
                _context.SetAllForeignKeysToNullExceptProject_Batch<ChecklistUser>(x => x.LotItp.Lot.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ForecastCashflow>(x => x.ForecastDetail.ForecastVersion.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ForecastCostEstimate>(x => x.ForecastDetail.ForecastVersion.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<LotItpQty>(x => x.LotItp.Lot.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<LotItpUser>(x => x.LotItp.Lot.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ProgressClaimReviewQuantity>(x => x.ProgressClaimDetail.ProgressClaimVersion.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<RiskHazard>(x => x.RiskActivityStep.RiskActivity.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<SurveyResult>(x => x.SurveyResultSet.SurveyRequest.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<TestResult>(x => x.TestRequestTest.TestRequest.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkflowActionPoint>(x => x.WorkflowAction.Workflow.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkflowActionRole>(x => x.WorkflowAction.Workflow.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkflowActionUser>(x => x.WorkflowAction.Workflow.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalCc>(x=>(x.Approval.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalEmail>(x=>(x.Approval.ProjectId == ProjectId) || (x.EmailLog.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalItpDetail>(x=>(x.Approval.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalLot>(x=>(x.Approval.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalLotItpDetail>(x=>(x.Approval.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalLotQty>(x=>(x.Approval.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalNcr>(x=>(x.Approval.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalSurvey>(x=>(x.Approval.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalTo>(x=>(x.Approval.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalWorkflowAddressee>(x=>(x.ApprovalWorkflow.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<AtpLot>(x=>(x.Atp.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnApproval>(x=>(x.Approval.ProjectId == ProjectId) || (x.ContractNotice.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnControlledDoc>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.CpDocument.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnEmail>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.EmailLog.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnIncident>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Incident.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnInstruction>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Instruction.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnItp>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Itp.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnLot>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnNotice>(x=>(x.ContractNotice_CnId1.ProjectId == ProjectId) || (x.ContractNotice_CnId2.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnPhoto>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnResponse>(x=>(x.ContractNotice.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnTo>(x=>(x.ContractNotice.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CnVariation>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ControlLinePoint>(x=>(x.ControlLine.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ControlLineTranslation>(x=>(x.ControlLineParent.ProjectId == ProjectId) || (x.ControlLineReference.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CostCodeCustomRegItem>(x=>(x.CostCode.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<CustomRegisterItem>(x=>(x.CustomRegister.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<DaycostCostCode>(x=>(x.CostCode.ProjectId == ProjectId) || (x.DayCost.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<DaycostCustomRegItem>(x=>(x.DayCost.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<Distribution>(x=>(x.CpDocument.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ForecastDetail>(x=>(x.CostCode.ProjectId == ProjectId) || (x.ForecastVersion.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ForecastWinLoss>(x=>(x.ForecastVersion.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ForecastWlDistro>(x=>(x.CostCode.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsApproval>(x=>(x.Approval.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsControlLine>(x=>(x.ControlLine.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsDoc>(x=>(x.CpDocument.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsEmail>(x=>(x.EmailLog.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsIncident>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Incident.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsInstruction>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Instruction.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsItp>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Itp.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsLot>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId) || (x.LotMapSection.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsLotQty>(x=>(x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsNcr>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsNotice>(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsPClaimDetail>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.ProgressClaimVersion.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsPunchlistItem>(x=>(x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsPurchaseOrder>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsSupplier>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Supplier.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsSurvey>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsTestReq>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsVariation>(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<FsWorkflowLog>(x=>(x.FileStoreDoc.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ImageLayerPoint>(x=>(x.ImageLayer.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<IncidentPerson>(x=>(x.Incident.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<InvoiceDispute>(x=>(x.Invoice.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<InvoiceOrder>(x=>(x.Invoice.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<InvoiceRetention>(x=>(x.Invoice.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ItpDetail>(x=>(x.Itp.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ItpDetailWorkflow>(x=>(x.ApprovalWorkflow.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ItpScheduleItem>(x=>(x.Itp.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotCoordinate>(x=>(x.ControlLine.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotCustomRegItem>(x=>(x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotInstruction>(x=>(x.Instruction.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotItp>(x=>(x.Itp.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotItpDetail>(x=>(x.ApprovalAtp.ProjectId == ProjectId) || (x.Approval.ProjectId == ProjectId) || (x.ApprovalLot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotMapLayer>(x=>(x.LotMapSection.ProjectId == ProjectId) || (x.WorkType.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotMapSectionBlock>(x=>(x.LotMapSection_LotMapSectionId.ProjectId == ProjectId) || (x.RefLotMapSection.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotMapSectionLot>(x=>(x.Lot.ProjectId == ProjectId) || (x.LotMapSection.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotMapSetSection>(x=>(x.LotMapSection.ProjectId == ProjectId) || (x.LotMapSet.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotQuantity>(x=>(x.Lot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotRelation>(x=>(x.Lot1.ProjectId == ProjectId) || (x.Lot2.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotSurvey>(x=>(x.Lot.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotSurveyResultSet>(x=>(x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotTag>(x=>(x.Lot.ProjectId == ProjectId) || (x.TagCode.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotUser>(x=>(x.Lot.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<NcrCustomRegItem>(x=>(x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<NcrDocument>(x=>(x.CpDocument.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<NcrLot>(x=>(x.Lot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<NcrRevision>(x=>(x.Ncr.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestCoordinate>(x=>(x.ControlLine_ControlLine.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoApproval>(x=>(x.Approval.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoChecklistItem>(x=>(x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoIncident>(x=>(x.Incident.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoLot>(x=>(x.Lot.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoNcr>(x=>(x.Ncr.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoPunchListItem>(x=>(x.Photo.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PhotoVariation>(x=>(x.Photo.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PoEmail>(x=>(x.EmailLog.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ProgressClaimDetail>(x=>(x.ProgressClaimVersion.ProjectId == ProjectId) || (x.ReportPeriod.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ProgressClaimReview>(x=>(x.ProgressClaimVersion.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ProgressClaimSnapshot>(x=>(x.Lot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId) || (x.ProgressClaimVersion.ProjectId == ProjectId) || (x.ReportPeriod.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ProgressClaimVersionEmail>(x=>(x.EmailLog.ProjectId == ProjectId) || (x.ProgressClaimVersion.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PunchlistItem>(x=>(x.Punchlist.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PunchlistItemPoint>(x=>(x.ControlLine.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<PurchaseOrderDetail>(x=>(x.CostCode.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<Receipt>(x=>(x.PurchaseOrder.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<ReceiptDetail>(x=>(x.CostCode.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<Revision>(x=>(x.CpDocument.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<RiskActivityStep>(x=>(x.RiskActivity.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SchedCostCode>(x=>(x.CostCode.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SiteDiaryCost>(x=>(x.Resource.ProjectId == ProjectId) || (x.SiteDiary.ProjectId == ProjectId) || (x.Supplier.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SiteDiaryCostCode>(x=>(x.CostCode.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SubcontractorLot>(x=>(x.Lot.ProjectId == ProjectId) || (x.Subcontractor.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SubcontractorUser>(x=>(x.Subcontractor.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SupplierDivision>(x=>(x.Supplier.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SurveyChainage>(x=>(x.ControlLine.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SurveyCoordinate>(x=>(x.ControlLine.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SurveyEmail>(x=>(x.EmailLog.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<SurveyResultSet>(x=>(x.SurveyRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestPropertyItem>(x=>(x.TestPropertyGroup.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestReqCustomRegItem>(x=>(x.TestRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestReqEmail>(x=>(x.EmailLog.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestRequestProperty>(x=>(x.TestRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestRequestTest>(x=>(x.ControlLine.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId) || (x.TestMethod.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestResultField>(x=>(x.TestMethod.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TestSchedule>(x=>(x.Lot.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TransmittalEmail>(x=>(x.EmailLog.ProjectId == ProjectId) || (x.Transmittal.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<TransmittalItem>(x=>(x.CpDocument.ProjectId == ProjectId) || (x.Transmittal.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<UserGroup>(x=>(x.Group.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<VariationCostCode>(x=>(x.CostCode.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<VariationEstimate>(x=>(x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<VariationLot>(x=>(x.Lot.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<VariationSchedule>(x=>(x.ScheduleItem.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<VrnInstruction>(x=>(x.Instruction.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<VrnWaypoint>(x=>(x.Variation.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkflowAction>(x=>(x.Workflow.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkflowLog>(x=>(x.Workflow.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkflowStep>(x=>(x.Workflow.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkSchedule>(x=>(x.ScheduleItem.ProjectId == ProjectId) || (x.WorkType.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<Approval>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ApprovalWorkflow>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<AreaCode>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Atp>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Constant>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ContractNotice>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ContractNoticeTemplate>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ControlLine>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<CostCode>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<CpDocument>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<CustomRegister>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<DayCost>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<EmailLog>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<FileStoreDoc>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ForecastVersion>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Group>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ImageLayer>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Incident>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Instruction>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Insurance>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Invoice>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Itp>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ItpTesting>(x=>(x.TestMethod.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<KeyDate>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Lot>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<LotItpTest>(x=>(x.TestMethod.ProjectId == ProjectId));
_context.SetAllForeignKeysToNullExceptProject_Batch<LotMapSection>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<LotMapSet>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Ncr>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<TestRequest>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Personnel>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Photo>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Production>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ProgressClaimVersion>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ProjectReport>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ProjectUser>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Punchlist>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<PurchaseOrder>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ReportPeriod>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Resource>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<RiskActivity>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<RiskTemplate>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ScheduleItem>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<ScheduleTemplate>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<SiteDiary>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Subcontractor>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<SupplierLink>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<SurveyRequest>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Synopsis>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<SystemProjectControl>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<SystemUserControl>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<TagCode>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Template>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<TestMethod>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<TestPropertyGroup>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Transmittal>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Unit>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<UserInvite>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<UserRole>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Variation>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<Workflow>(x=>x.ProjectId == ProjectId);
_context.SetAllForeignKeysToNullExceptProject_Batch<WorkType>(x=>x.ProjectId == ProjectId);
                _context.Set<ChecklistUser>().Where(x => x.LotItp.Lot.ProjectId == ProjectId).Delete();
_context.Set<ForecastCashflow>().Where(x => x.ForecastDetail.ForecastVersion.ProjectId == ProjectId).Delete();
_context.Set<ForecastCostEstimate>().Where(x => x.ForecastDetail.ForecastVersion.ProjectId == ProjectId).Delete();
_context.Set<LotItpQty>().Where(x => x.LotItp.Lot.ProjectId == ProjectId).Delete();
_context.Set<LotItpUser>().Where(x => x.LotItp.Lot.ProjectId == ProjectId).Delete();
_context.Set<ProgressClaimReviewQuantity>().Where(x => x.ProgressClaimDetail.ProgressClaimVersion.ProjectId == ProjectId).Delete();
_context.Set<RiskHazard>().Where(x => x.RiskActivityStep.RiskActivity.ProjectId == ProjectId).Delete();
_context.Set<SurveyResult>().Where(x => x.SurveyResultSet.SurveyRequest.ProjectId == ProjectId).Delete();
_context.Set<TestResult>().Where(x => x.TestRequestTest.TestRequest.ProjectId == ProjectId).Delete();
_context.Set<WorkflowActionPoint>().Where(x => x.WorkflowAction.Workflow.ProjectId == ProjectId).Delete();
_context.Set<WorkflowActionRole>().Where(x => x.WorkflowAction.Workflow.ProjectId == ProjectId).Delete();
_context.Set<WorkflowActionUser>().Where(x => x.WorkflowAction.Workflow.ProjectId == ProjectId).Delete();
_context.Set<ApprovalCc>().Where(x=>(x.Approval.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalEmail>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.EmailLog.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalItpDetail>().Where(x=>(x.Approval.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalLot>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalLotItpDetail>().Where(x=>(x.Approval.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalLotQty>().Where(x=>(x.Approval.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalNcr>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalSurvey>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalTo>().Where(x=>(x.Approval.ProjectId == ProjectId)).Delete();
_context.Set<ApprovalWorkflowAddressee>().Where(x=>(x.ApprovalWorkflow.ProjectId == ProjectId)).Delete();
_context.Set<AtpLot>().Where(x=>(x.Atp.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<CnApproval>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.ContractNotice.ProjectId == ProjectId)).Delete();
_context.Set<CnControlledDoc>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.CpDocument.ProjectId == ProjectId)).Delete();
_context.Set<CnEmail>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.EmailLog.ProjectId == ProjectId)).Delete();
_context.Set<CnIncident>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Incident.ProjectId == ProjectId)).Delete();
_context.Set<CnInstruction>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Instruction.ProjectId == ProjectId)).Delete();
_context.Set<CnItp>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Itp.ProjectId == ProjectId)).Delete();
_context.Set<CnLot>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<CnNotice>().Where(x=>(x.ContractNotice_CnId1.ProjectId == ProjectId) || (x.ContractNotice_CnId2.ProjectId == ProjectId)).Delete();
_context.Set<CnPhoto>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<CnResponse>().Where(x=>(x.ContractNotice.ProjectId == ProjectId)).Delete();
_context.Set<CnTo>().Where(x=>(x.ContractNotice.ProjectId == ProjectId)).Delete();
_context.Set<CnVariation>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<ControlLinePoint>().Where(x=>(x.ControlLine.ProjectId == ProjectId)).Delete();
_context.Set<ControlLineTranslation>().Where(x=>(x.ControlLineParent.ProjectId == ProjectId) || (x.ControlLineReference.ProjectId == ProjectId)).Delete();
_context.Set<CostCodeCustomRegItem>().Where(x=>(x.CostCode.ProjectId == ProjectId)).Delete();
_context.Set<CustomRegisterItem>().Where(x=>(x.CustomRegister.ProjectId == ProjectId)).Delete();
_context.Set<DaycostCostCode>().Where(x=>(x.CostCode.ProjectId == ProjectId) || (x.DayCost.ProjectId == ProjectId)).Delete();
_context.Set<DaycostCustomRegItem>().Where(x=>(x.DayCost.ProjectId == ProjectId)).Delete();
_context.Set<Distribution>().Where(x=>(x.CpDocument.ProjectId == ProjectId)).Delete();
_context.Set<ForecastDetail>().Where(x=>(x.CostCode.ProjectId == ProjectId) || (x.ForecastVersion.ProjectId == ProjectId)).Delete();
_context.Set<ForecastWinLoss>().Where(x=>(x.ForecastVersion.ProjectId == ProjectId)).Delete();
_context.Set<ForecastWlDistro>().Where(x=>(x.CostCode.ProjectId == ProjectId)).Delete();
_context.Set<FsApproval>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsControlLine>().Where(x=>(x.ControlLine.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsDoc>().Where(x=>(x.CpDocument.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsEmail>().Where(x=>(x.EmailLog.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsIncident>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Incident.ProjectId == ProjectId)).Delete();
_context.Set<FsInstruction>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Instruction.ProjectId == ProjectId)).Delete();
_context.Set<FsItp>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Itp.ProjectId == ProjectId)).Delete();
_context.Set<FsLot>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId) || (x.LotMapSection.ProjectId == ProjectId)).Delete();
_context.Set<FsLotQty>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsNcr>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<FsNotice>().Where(x=>(x.ContractNotice.ProjectId == ProjectId) || (x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsPClaimDetail>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.ProgressClaimVersion.ProjectId == ProjectId)).Delete();
_context.Set<FsPunchlistItem>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<FsPurchaseOrder>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId)).Delete();
_context.Set<FsSupplier>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Supplier.ProjectId == ProjectId)).Delete();
_context.Set<FsSurvey>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<FsTestReq>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId)).Delete();
_context.Set<FsVariation>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<FsWorkflowLog>().Where(x=>(x.FileStoreDoc.ProjectId == ProjectId)).Delete();
_context.Set<ImageLayerPoint>().Where(x=>(x.ImageLayer.ProjectId == ProjectId)).Delete();
_context.Set<IncidentPerson>().Where(x=>(x.Incident.ProjectId == ProjectId)).Delete();
_context.Set<InvoiceDispute>().Where(x=>(x.Invoice.ProjectId == ProjectId)).Delete();
_context.Set<InvoiceOrder>().Where(x=>(x.Invoice.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId)).Delete();
_context.Set<InvoiceRetention>().Where(x=>(x.Invoice.ProjectId == ProjectId)).Delete();
_context.Set<ItpDetail>().Where(x=>(x.Itp.ProjectId == ProjectId)).Delete();
_context.Set<ItpDetailWorkflow>().Where(x=>(x.ApprovalWorkflow.ProjectId == ProjectId)).Delete();
_context.Set<ItpScheduleItem>().Where(x=>(x.Itp.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId)).Delete();
_context.Set<LotCoordinate>().Where(x=>(x.ControlLine.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<LotCustomRegItem>().Where(x=>(x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<LotInstruction>().Where(x=>(x.Instruction.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<LotItp>().Where(x=>(x.Itp.ProjectId == ProjectId) || (x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<LotItpDetail>().Where(x=>(x.ApprovalAtp.ProjectId == ProjectId) || (x.Approval.ProjectId == ProjectId) || (x.ApprovalLot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<LotMapLayer>().Where(x=>(x.LotMapSection.ProjectId == ProjectId) || (x.WorkType.ProjectId == ProjectId)).Delete();
_context.Set<LotMapSectionBlock>().Where(x=>(x.LotMapSection_LotMapSectionId.ProjectId == ProjectId) || (x.RefLotMapSection.ProjectId == ProjectId)).Delete();
_context.Set<LotMapSectionLot>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.LotMapSection.ProjectId == ProjectId)).Delete();
_context.Set<LotMapSetSection>().Where(x=>(x.LotMapSection.ProjectId == ProjectId) || (x.LotMapSet.ProjectId == ProjectId)).Delete();
_context.Set<LotQuantity>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<LotRelation>().Where(x=>(x.Lot1.ProjectId == ProjectId) || (x.Lot2.ProjectId == ProjectId)).Delete();
_context.Set<LotSurvey>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<LotSurveyResultSet>().Where(x=>(x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<LotTag>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.TagCode.ProjectId == ProjectId)).Delete();
_context.Set<LotUser>().Where(x=>(x.Lot.ProjectId == ProjectId)).Delete();
_context.Set<NcrCustomRegItem>().Where(x=>(x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<NcrDocument>().Where(x=>(x.CpDocument.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<NcrLot>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<NcrRevision>().Where(x=>(x.Ncr.ProjectId == ProjectId)).Delete();
_context.Set<TestCoordinate>().Where(x=>(x.ControlLine_ControlLine.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId)).Delete();
_context.Set<PhotoApproval>().Where(x=>(x.Approval.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<PhotoChecklistItem>().Where(x=>(x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<PhotoIncident>().Where(x=>(x.Incident.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<PhotoLot>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<PhotoNcr>().Where(x=>(x.Ncr.ProjectId == ProjectId) || (x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<PhotoPunchListItem>().Where(x=>(x.Photo.ProjectId == ProjectId)).Delete();
_context.Set<PhotoVariation>().Where(x=>(x.Photo.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<PoEmail>().Where(x=>(x.EmailLog.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId)).Delete();
_context.Set<ProgressClaimDetail>().Where(x=>(x.ProgressClaimVersion.ProjectId == ProjectId) || (x.ReportPeriod.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId)).Delete();
_context.Set<ProgressClaimReview>().Where(x=>(x.ProgressClaimVersion.ProjectId == ProjectId)).Delete();
_context.Set<ProgressClaimSnapshot>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.Ncr.ProjectId == ProjectId) || (x.ProgressClaimVersion.ProjectId == ProjectId) || (x.ReportPeriod.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<ProgressClaimVersionEmail>().Where(x=>(x.EmailLog.ProjectId == ProjectId) || (x.ProgressClaimVersion.ProjectId == ProjectId)).Delete();
_context.Set<PunchlistItem>().Where(x=>(x.Punchlist.ProjectId == ProjectId)).Delete();
_context.Set<PunchlistItemPoint>().Where(x=>(x.ControlLine.ProjectId == ProjectId)).Delete();
_context.Set<PurchaseOrderDetail>().Where(x=>(x.CostCode.ProjectId == ProjectId) || (x.PurchaseOrder.ProjectId == ProjectId)).Delete();
_context.Set<Receipt>().Where(x=>(x.PurchaseOrder.ProjectId == ProjectId)).Delete();
_context.Set<ReceiptDetail>().Where(x=>(x.CostCode.ProjectId == ProjectId)).Delete();
_context.Set<Revision>().Where(x=>(x.CpDocument.ProjectId == ProjectId)).Delete();
_context.Set<RiskActivityStep>().Where(x=>(x.RiskActivity.ProjectId == ProjectId)).Delete();
_context.Set<SchedCostCode>().Where(x=>(x.CostCode.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId)).Delete();
_context.Set<SiteDiaryCost>().Where(x=>(x.Resource.ProjectId == ProjectId) || (x.SiteDiary.ProjectId == ProjectId) || (x.Supplier.ProjectId == ProjectId)).Delete();
_context.Set<SiteDiaryCostCode>().Where(x=>(x.CostCode.ProjectId == ProjectId)).Delete();
_context.Set<SubcontractorLot>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.Subcontractor.ProjectId == ProjectId)).Delete();
_context.Set<SubcontractorUser>().Where(x=>(x.Subcontractor.ProjectId == ProjectId)).Delete();
_context.Set<SupplierDivision>().Where(x=>(x.Supplier.ProjectId == ProjectId)).Delete();
_context.Set<SurveyChainage>().Where(x=>(x.ControlLine.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<SurveyCoordinate>().Where(x=>(x.ControlLine.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<SurveyEmail>().Where(x=>(x.EmailLog.ProjectId == ProjectId) || (x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<SurveyResultSet>().Where(x=>(x.SurveyRequest.ProjectId == ProjectId)).Delete();
_context.Set<TestPropertyItem>().Where(x=>(x.TestPropertyGroup.ProjectId == ProjectId)).Delete();
_context.Set<TestReqCustomRegItem>().Where(x=>(x.TestRequest.ProjectId == ProjectId)).Delete();
_context.Set<TestReqEmail>().Where(x=>(x.EmailLog.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId)).Delete();
_context.Set<TestRequestProperty>().Where(x=>(x.TestRequest.ProjectId == ProjectId)).Delete();
_context.Set<TestRequestTest>().Where(x=>(x.ControlLine.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId) || (x.TestMethod.ProjectId == ProjectId) || (x.TestRequest.ProjectId == ProjectId)).Delete();
_context.Set<TestResultField>().Where(x=>(x.TestMethod.ProjectId == ProjectId)).Delete();
_context.Set<TestSchedule>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.ScheduleItem.ProjectId == ProjectId)).Delete();
_context.Set<TransmittalEmail>().Where(x=>(x.EmailLog.ProjectId == ProjectId) || (x.Transmittal.ProjectId == ProjectId)).Delete();
_context.Set<TransmittalItem>().Where(x=>(x.CpDocument.ProjectId == ProjectId) || (x.Transmittal.ProjectId == ProjectId)).Delete();
_context.Set<UserGroup>().Where(x=>(x.Group.ProjectId == ProjectId)).Delete();
_context.Set<VariationCostCode>().Where(x=>(x.CostCode.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<VariationEstimate>().Where(x=>(x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<VariationLot>().Where(x=>(x.Lot.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<VariationSchedule>().Where(x=>(x.ScheduleItem.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<VrnInstruction>().Where(x=>(x.Instruction.ProjectId == ProjectId) || (x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<VrnWaypoint>().Where(x=>(x.Variation.ProjectId == ProjectId)).Delete();
_context.Set<WorkflowAction>().Where(x=>(x.Workflow.ProjectId == ProjectId)).Delete();
_context.Set<WorkflowLog>().Where(x=>(x.Workflow.ProjectId == ProjectId)).Delete();
_context.Set<WorkflowStep>().Where(x=>(x.Workflow.ProjectId == ProjectId)).Delete();
_context.Set<WorkSchedule>().Where(x=>(x.ScheduleItem.ProjectId == ProjectId) || (x.WorkType.ProjectId == ProjectId)).Delete();
_context.Set<Approval>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ApprovalWorkflow>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<AreaCode>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Atp>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Constant>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ContractNotice>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ContractNoticeTemplate>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ControlLine>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<CostCode>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<CpDocument>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<CustomRegister>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<DayCost>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<EmailLog>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<FileStoreDoc>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ForecastVersion>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Group>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ImageLayer>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Incident>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Instruction>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Insurance>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Invoice>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Itp>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ItpTesting>().Where(x=>(x.TestMethod.ProjectId == ProjectId)).Delete();
_context.Set<KeyDate>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Lot>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<LotItpTest>().Where(x=>(x.TestMethod.ProjectId == ProjectId)).Delete();
_context.Set<LotMapSection>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<LotMapSet>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Ncr>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<TestRequest>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Personnel>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Photo>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Production>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ProgressClaimVersion>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ProjectReport>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ProjectUser>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Punchlist>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<PurchaseOrder>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ReportPeriod>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Resource>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<RiskActivity>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<RiskTemplate>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ScheduleItem>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<ScheduleTemplate>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<SiteDiary>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Subcontractor>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<SupplierLink>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<SurveyRequest>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Synopsis>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<SystemProjectControl>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<SystemUserControl>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<TagCode>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Template>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<TestMethod>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<TestPropertyGroup>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Transmittal>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Unit>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<UserInvite>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<UserRole>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Variation>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<Workflow>().Where(x=>x.ProjectId == ProjectId).Delete();
_context.Set<WorkType>().Where(x=>x.ProjectId == ProjectId).Delete();
                _context.Projects.Where(x => x.ProjectId == ProjectId).Delete();
                _tx.Commit();
                foreach (User user in _context.Users.Where(x => x.ProjectId == ProjectId && x.Username == null))
                {
                    try
                    {
                        _context.Users.Remove(user);
                        _context.SaveChanges();
                    }
                    catch (Exception ex)
                    {

                    }
                }
            }
            catch (Exception ex)
            {
                if (_context.Database.CurrentTransaction!=null) _tx.Rollback();
                Log.Error(ex, "Error deleting Project(DeleteProject)");
                throw;
            }
        }
    }